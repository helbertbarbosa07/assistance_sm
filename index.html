<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Assistance SM - Sistema Inteligente</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <!-- P√°gina de Login -->
    <div id="loginPage" class="login-page">
        <div class="login-container">
            <div class="login-header">
                <h1><i class="fas fa-brain"></i> Assistance SM</h1>
                <p>Sistema Inteligente de Gest√£o Educacional</p>
            </div>
            
            <div class="login-tabs">
                <button class="tab-btn active" onclick="showTab('user', this)">
                    <i class="fas fa-user-graduate"></i> Usu√°rio
                </button>
                <button class="tab-btn" onclick="showTab('admin', this)">
                    <i class="fas fa-user-shield"></i> Admin
                </button>
            </div>

            <!-- Acesso Usu√°rio -->
            <div id="userTab" class="tab-content">
                <div class="form-group">
                    <label><i class="fas fa-user"></i> Seu Nome</label>
                    <input type="text" id="username" class="form-control" 
                           placeholder="Digite seu nome" value="Visitante">
                </div>
                <button class="btn btn-primary" onclick="loginAsUser()" style="width: 100%; margin-top: 20px;">
                    <i class="fas fa-rocket"></i> Entrar como Usu√°rio
                </button>
                <div style="margin-top: 24px; text-align: center;">
                    <p style="color: var(--secondary); font-size: 14px; line-height: 1.6;">
                        <i class="fas fa-eye"></i> Acesso para visualizar e interagir com cursos
                    </p>
                </div>
            </div>

            <!-- Acesso Admin -->
            <div id="adminTab" class="tab-content" style="display: none;">
                <div class="form-group">
                    <label><i class="fas fa-user-circle"></i> Usu√°rio Admin</label>
                    <input type="text" id="adminUser" class="form-control" 
                           placeholder="admin" value="admin">
                </div>
                <div class="form-group" style="margin-top: 16px;">
                    <label><i class="fas fa-key"></i> Senha Admin</label>
                    <input type="password" id="adminPass" class="form-control" 
                           placeholder="Digite a senha" value="admin123">
                </div>
                <button class="btn btn-primary" onclick="loginAsAdmin()" style="width: 100%; margin-top: 24px;">
                    <i class="fas fa-sign-in-alt"></i> Acessar Painel Admin
                </button>
                <div style="margin-top: 24px; text-align: center;">
                    <p style="color: var(--secondary); font-size: 14px; line-height: 1.6;">
                        <i class="fas fa-cog"></i> Acesso completo para gerenciar cursos e configura√ß√µes
                    </p>
                </div>
            </div>
            
            <div style="padding: 20px 32px; border-top: 1px solid #e5e7eb; text-align: center;">
                <small style="color: var(--secondary); font-size: 12px;">
                    <i class="fas fa-info-circle"></i> Sistema v4.0 | Banco Neon + Vercel
                </small>
            </div>
        </div>
    </div>

    <!-- Sistema Principal - USU√ÅRIO -->
    <div id="appUser" class="app-container" style="display: none;">
        <!-- Sidebar Usu√°rio -->
        <div class="sidebar">
            <div class="sidebar-header">
                <div class="logo">
                    <i class="fas fa-brain"></i>
                    <div>
                        <div class="logo-text">Assistance</div>
                        <div class="logo-subtext">SM v4.0</div>
                    </div>
                </div>
            </div>
            
            <div class="user-info">
                <div class="user-avatar" id="userAvatar">U</div>
                <div class="user-details">
                    <h4 id="userName">Usu√°rio</h4>
                    <p id="userRole">Visitante</p>
                </div>
            </div>
            
            <div class="nav-menu">
                <div class="nav-item active" data-page="ia">
                    <i class="fas fa-robot"></i>
                    <span>Assistente IA</span>
                </div>
                <div class="nav-item" data-page="catalog">
                    <i class="fas fa-book"></i>
                    <span>Cat√°logo</span>
                </div>
                <div class="nav-item" data-page="about">
                    <i class="fas fa-info-circle"></i>
                    <span>Sobre</span>
                </div>
            </div>
        </div>

        <!-- Conte√∫do Principal Usu√°rio -->
        <div class="main-content">
            <div class="top-bar">
                <div class="welcome-message" id="welcomeMessageUser">
                    Ol√°, <strong id="userFullNameUser">Usu√°rio</strong>!
                </div>
                <div class="top-bar-actions">
                    <span id="apiStatusBadge" class="badge badge-warning">
                        <i class="fas fa-plug"></i> API: CONECTANDO...
                    </span>
                    <button class="btn btn-danger btn-sm" onclick="logout()">
                        <i class="fas fa-sign-out-alt"></i> Sair
                    </button>
                </div>
            </div>

            <!-- P√°ginas Usu√°rio -->
            <div id="pagesUser">
                <!-- Assistente IA -->
                <div id="iaPage" class="page active">
                    <div class="container">
                        <div class="chat-container">
                            <!-- Sidebar de Cursos -->
                            <div class="sidebar-cursos">
                                <div class="sidebar-cursos-header">
                                    <h3><i class="fas fa-graduation-cap"></i> Cat√°logo de Cursos</h3>
                                    <p>Selecione um curso para iniciar</p>
                                </div>
                                <div class="cursos-container" id="cursosContainer">
                                    <div style="text-align: center; padding: 40px;">
                                        <div class="loader"></div>
                                        <p style="color: var(--secondary); margin-top: 16px;">Carregando cursos...</p>
                                    </div>
                                </div>
                            </div>

                            <!-- Chat IA -->
                            <div class="chat-ia-container">
                                <div class="chat-header">
                                    <div class="chat-title">
                                        <i class="fas fa-robot"></i>
                                        <h2>Assistente de IA</h2>
                                    </div>
                                    <div class="current-course" id="currentCourse">
                                        <i class="fas fa-book"></i>
                                        <span>Selecione um curso ao lado</span>
                                    </div>
                                </div>
                                
                                <div class="messages-container" id="messagesContainer">
                                    <div class="message assistant">
                                        <div class="message-header">
                                            <i class="fas fa-robot"></i>
                                            Assistente IA
                                        </div>
                                        <div class="message-content">
                                            üëã Ol√°! Eu sou seu assistente especializado em cursos universit√°rios.
                                            <br><br>
                                            <strong>Como funciona:</strong>
                                            <br>
                                            1. Selecione um curso ao lado<br>
                                            2. Fa√ßa perguntas sobre o curso<br>
                                            3. Obtenha informa√ß√µes detalhadas<br>
                                            4. Pe√ßa sugest√µes de carreira
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="input-container">
                                    <div class="input-wrapper">
                                        <textarea id="userInput" placeholder="Digite sua pergunta aqui... Pressione Enter para enviar." rows="1"></textarea>
                                        <button class="btn btn-primary" id="sendButton" onclick="sendMessage()">
                                            <i class="fas fa-paper-plane"></i>
                                        </button>
                                    </div>
                                    <div class="quick-actions" id="quickActions">
                                        <button class="quick-action-btn" onclick="quickAction('info')">
                                            <i class="fas fa-info-circle"></i> Informa√ß√µes do Curso
                                        </button>
                                        <button class="quick-action-btn" onclick="quickAction('career')">
                                            <i class="fas fa-briefcase"></i> Carreira
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Cat√°logo -->
                <div id="catalogPage" class="page">
                    <div class="container">
                        <div class="admin-section">
                            <h2 class="section-title">
                                <i class="fas fa-book"></i> Cat√°logo de Cursos
                            </h2>
                            <p>Explore todos os cursos dispon√≠veis</p>
                            
                            <div class="catalogo-grid" id="catalogoCursos">
                                <!-- Cursos ser√£o carregados via API -->
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Sobre -->
                <div id="aboutPage" class="page">
                    <div class="container">
                        <div class="admin-section">
                            <div style="text-align: center; padding: 40px 20px;">
                                <div style="font-size: 72px; color: var(--primary); margin-bottom: 20px;">
                                    <i class="fas fa-brain"></i>
                                </div>
                                
                                <h1 style="font-size: 36px; margin-bottom: 10px; color: var(--dark);">
                                    Assistance SM v4.0
                                </h1>
                                
                                <p style="font-size: 18px; color: var(--secondary); margin-bottom: 30px;">
                                    Sistema Inteligente de Informa√ß√£o Educacional
                                </p>
                                
                                <div style="max-width: 600px; margin: 0 auto; text-align: left;">
                                    <h3><i class="fas fa-star"></i> Recursos para Usu√°rios</h3>
                                    <ul style="margin: 15px 0 25px 20px; color: var(--dark);">
                                        <li>Cat√°logo completo de cursos universit√°rios</li>
                                        <li>Assistente de IA para informa√ß√µes detalhadas</li>
                                        <li>Informa√ß√µes sobre carreira e mercado</li>
                                        <li>Interface moderna e responsiva</li>
                                        <li>Acesso 24/7 aos dados</li>
                                    </ul>
                                    
                                    <div style="margin-top: 40px; padding-top: 20px; border-top: 1px solid var(--border);">
                                        <p style="text-align: center; color: var(--secondary); font-size: 14px;">
                                            <i class="fas fa-database"></i> Banco de dados: Neon PostgreSQL
                                            <br>
                                            <i class="fas fa-server"></i> Hospedagem: Vercel
                                            <br>
                                            <i class="fas fa-copyright"></i> 2024 Assistance SM. Todos os direitos reservados.
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Sistema Principal - ADMIN -->
    <div id="appAdmin" class="app-container" style="display: none;">
        <!-- Sidebar Admin -->
        <div class="sidebar">
            <div class="sidebar-header">
                <div class="logo">
                    <i class="fas fa-brain"></i>
                    <div>
                        <div class="logo-text">Assistance</div>
                        <div class="logo-subtext">ADMIN v4.0</div>
                    </div>
                </div>
            </div>
            
            <div class="user-info">
                <div class="user-avatar" id="adminAvatar">A</div>
                <div class="user-details">
                    <h4 id="adminName">Admin</h4>
                    <p id="adminRole">Administrador</p>
                </div>
            </div>
            
            <div class="nav-menu">
                <div class="nav-item active" data-page="dashboard">
                    <i class="fas fa-tachometer-alt"></i>
                    <span>Dashboard</span>
                </div>
                <div class="nav-item" data-page="courses">
                    <i class="fas fa-book"></i>
                    <span>Gest√£o de Cursos</span>
                </div>
                <div class="nav-item" data-page="config">
                    <i class="fas fa-cog"></i>
                    <span>Configura√ß√µes</span>
                </div>
                <div class="nav-item" data-page="api">
                    <i class="fas fa-robot"></i>
                    <span>Configurar IA</span>
                </div>
                <div class="nav-item" data-page="users">
                    <i class="fas fa-users"></i>
                    <span>Usu√°rios</span>
                </div>
            </div>
        </div>

        <!-- Conte√∫do Principal Admin -->
        <div class="main-content">
            <div class="top-bar">
                <div class="welcome-message" id="welcomeMessageAdmin">
                    Painel Admin, <strong id="adminFullName">Administrador</strong>!
                </div>
                <div class="top-bar-actions">
                    <span id="apiStatusAdmin" class="badge badge-warning">
                        <i class="fas fa-plug"></i> API: CONECTANDO...
                    </span>
                    <button class="btn btn-danger btn-sm" onclick="logout()">
                        <i class="fas fa-sign-out-alt"></i> Sair
                    </button>
                </div>
            </div>

            <!-- P√°ginas Admin -->
            <div id="pagesAdmin">
                <!-- Dashboard Admin -->
                <div id="dashboardPage" class="page active">
                    <div class="container">
                        <div class="admin-section">
                            <h2 class="section-title">
                                <i class="fas fa-tachometer-alt"></i> Dashboard Admin
                            </h2>
                            <p>Estat√≠sticas e monitoramento do sistema</p>
                        </div>
                        
                        <div class="admin-stats" id="dashboardStats">
                            <!-- Stats ser√£o carregados via API -->
                        </div>
                        
                        <div class="admin-section">
                            <h3 class="section-title">
                                <i class="fas fa-chart-bar"></i> Atividade Recente
                            </h3>
                            <div id="recentActivity">
                                <!-- Atividades ser√£o carregadas via API -->
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Gest√£o de Cursos -->
                <div id="coursesPage" class="page">
                    <div class="container">
                        <div class="admin-section">
                            <h2 class="section-title">
                                <i class="fas fa-book"></i> Gest√£o de Cursos
                            </h2>
                            
                            <div style="display: flex; gap: 12px; margin-bottom: 24px;">
                                <button class="btn btn-success" onclick="showAddCourseModal()">
                                    <i class="fas fa-plus"></i> Adicionar Novo Curso
                                </button>
                                <button class="btn btn-info" onclick="refreshCourses()">
                                    <i class="fas fa-sync"></i> Atualizar Lista
                                </button>
                            </div>
                            
                            <div class="table-responsive">
                                <table id="coursesTable">
                                    <thead>
                                        <tr>
                                            <th>ID</th>
                                            <th>Curso</th>
                                            <th>Dura√ß√£o</th>
                                            <th>Vagas</th>
                                            <th>Investimento</th>
                                            <th>Status</th>
                                            <th>A√ß√µes</th>
                                        </tr>
                                    </thead>
                                    <tbody id="coursesTableBody">
                                        <!-- Cursos ser√£o carregados via API -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Configura√ß√µes do Sistema -->
                <div id="configPage" class="page">
                    <div class="container">
                        <div class="admin-section">
                            <h2 class="section-title">
                                <i class="fas fa-cog"></i> Configura√ß√µes do Sistema
                            </h2>
                            
                            <div class="settings-grid">
                                <div class="settings-card">
                                    <h3><i class="fas fa-database"></i> Banco de Dados</h3>
                                    <div class="mt-3">
                                        <div class="api-status" id="dbStatus">
                                            <i class="fas fa-database"></i>
                                            <span>Neon PostgreSQL: CONECTANDO...</span>
                                        </div>
                                        <button class="btn btn-primary mt-2" onclick="testDatabase()">
                                            <i class="fas fa-bolt"></i> Testar Conex√£o
                                        </button>
                                    </div>
                                </div>
                                
                                <div class="settings-card">
                                    <h3><i class="fas fa-server"></i> Servidor</h3>
                                    <div class="mt-3">
                                        <div class="form-group">
                                            <label>URL da API</label>
                                            <input type="text" id="apiUrl" class="form-control" 
                                                   value="https://assistance-sm.vercel.app/api">
                                        </div>
                                        <button class="btn btn-info mt-2" onclick="updateApiUrl()">
                                            <i class="fas fa-save"></i> Salvar URL
                                        </button>
                                    </div>
                                </div>
                                
                                <div class="settings-card">
                                    <h3><i class="fas fa-shield-alt"></i> Seguran√ßa</h3>
                                    <div class="mt-3">
                                        <div class="form-group">
                                            <label>JWT Secret Key</label>
                                            <input type="password" id="jwtSecret" class="form-control" 
                                                   placeholder="Chave secreta JWT">
                                        </div>
                                        <button class="btn btn-warning mt-2" onclick="resetPasswords()">
                                            <i class="fas fa-redo"></i> Resetar Senhas
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Configura√ß√£o IA -->
                <div id="apiPage" class="page">
                    <div class="container">
                        <div class="admin-section">
                            <h2 class="section-title">
                                <i class="fas fa-robot"></i> Configura√ß√£o da IA
                            </h2>
                            
                            <div class="config-grid">
                                <div class="config-card">
                                    <h3><i class="fas fa-key"></i> API Key OpenRouter</h3>
                                    <div class="mt-3">
                                        <div class="form-group">
                                            <label>Sua Chave API</label>
                                            <input type="password" id="openrouterKey" class="form-control" 
                                                   placeholder="Cole sua chave OpenRouter aqui">
                                            <small style="color: var(--secondary); margin-top: 4px; display: block;">
                                                Obtenha sua API key gratuita em 
                                                <a href="https://openrouter.ai/keys" target="_blank" style="color: var(--primary);">
                                                    openrouter.ai/keys
                                                </a>
                                            </small>
                                        </div>
                                        <button class="btn btn-primary mt-2" onclick="saveOpenRouterKey()">
                                            <i class="fas fa-save"></i> Salvar Chave
                                        </button>
                                        <button class="btn btn-info mt-2" onclick="testOpenRouter()">
                                            <i class="fas fa-bolt"></i> Testar Conex√£o
                                        </button>
                                    </div>
                                </div>
                                
                                <div class="config-card">
                                    <h3><i class="fas fa-sliders-h"></i> Configura√ß√µes do Modelo</h3>
                                    <div class="mt-3">
                                        <div class="form-group">
                                            <label>Modelo de IA</label>
                                            <select id="aiModel" class="form-control">
                                                <option value="mistralai/mistral-7b-instruct:free">Mistral 7B (Gratuito)</option>
                                                <option value="meta-llama/llama-3.1-70b-instruct:free">Llama 3.1 70B (Gratuito)</option>
                                                <option value="openai/gpt-3.5-turbo">GPT-3.5 Turbo</option>
                                                <option value="openai/gpt-4">GPT-4</option>
                                                <option value="google/gemini-pro">Gemini Pro</option>
                                            </select>
                                        </div>
                                        
                                        <div class="form-group">
                                            <label>
                                                Temperatura: <span id="tempValue">0.7</span>
                                            </label>
                                            <input type="range" id="tempRange" class="form-control" 
                                                   min="0" max="1" step="0.1" value="0.7">
                                        </div>
                                        
                                        <button class="btn btn-success mt-2" onclick="saveAISettings()">
                                            <i class="fas fa-save"></i> Salvar Configura√ß√µes
                                        </button>
                                    </div>
                                </div>
                                
                                <div class="config-card">
                                    <h3><i class="fas fa-chart-line"></i> Status da IA</h3>
                                    <div class="mt-3">
                                        <div id="aiStatus" class="api-status">
                                            <i class="fas fa-robot"></i>
                                            <span>IA: AGUARDANDO CONFIGURA√á√ÉO</span>
                                        </div>
                                        
                                        <div class="mt-4">
                                            <h4>Estat√≠sticas de Uso</h4>
                                            <div class="stats-mini">
                                                <div>
                                                    <strong>Respostas Geradas:</strong>
                                                    <span id="aiResponses">0</span>
                                                </div>
                                                <div>
                                                    <strong>Tokens Usados:</strong>
                                                    <span id="aiTokens">0</span>
                                                </div>
                                                <div>
                                                    <strong>Taxa de Sucesso:</strong>
                                                    <span id="aiSuccessRate">0%</span>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <button class="btn btn-warning mt-2" onclick="clearAIStats()">
                                            <i class="fas fa-trash"></i> Limpar Estat√≠sticas
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Gerenciamento de Usu√°rios -->
                <div id="usersPage" class="page">
                    <div class="container">
                        <div class="admin-section">
                            <h2 class="section-title">
                                <i class="fas fa-users"></i> Gerenciamento de Usu√°rios
                            </h2>
                            
                            <div class="table-responsive">
                                <table id="usersTable">
                                    <thead>
                                        <tr>
                                            <th>ID</th>
                                            <th>Nome</th>
                                            <th>Email</th>
                                            <th>Tipo</th>
                                            <th>√öltimo Login</th>
                                            <th>Status</th>
                                            <th>A√ß√µes</th>
                                        </tr>
                                    </thead>
                                    <tbody id="usersTableBody">
                                        <!-- Usu√°rios ser√£o carregados via API -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal para Adicionar/Editar Curso -->
    <div id="courseModal" class="modal-overlay" style="display: none;">
        <div class="modal">
            <h3 style="margin-bottom: 24px; display: flex; align-items: center; gap: 12px;">
                <i class="fas fa-book"></i> <span id="modalTitle">Adicionar Novo Curso</span>
            </h3>
            
            <div class="form-group">
                <label>Nome do Curso</label>
                <input type="text" id="courseName" class="form-control" 
                       placeholder="Ex: Medicina, Engenharia Civil, Direito">
            </div>
            
            <div class="form-group">
                <label>Descri√ß√£o Detalhada</label>
                <textarea id="courseDescription" class="form-control" rows="4"
                          placeholder="Descreva o curso, objetivos, metodologia..."></textarea>
            </div>
            
            <div class="form-group">
                <label>Dura√ß√£o</label>
                <input type="text" id="courseDuration" class="form-control" 
                       placeholder="Ex: 6 anos, 5 anos, 4 anos">
            </div>
            
            <div class="form-row" style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px;">
                <div class="form-group">
                    <label>Vagas Dispon√≠veis</label>
                    <input type="number" id="courseSlots" class="form-control" 
                           placeholder="Ex: 120, 200, 180" min="1">
                </div>
                
                <div class="form-group">
                    <label>Investimento Mensal</label>
                    <input type="text" id="courseInvestment" class="form-control" 
                           placeholder="Ex: R$ 8.500/m√™s, R$ 1.800/m√™s">
                </div>
            </div>
            
            <div class="form-group">
                <label>Informa√ß√µes de Carreira</label>
                <textarea id="courseCareer" class="form-control" rows="3"
                          placeholder="Mercado de trabalho, √°reas de atua√ß√£o, sal√°rios..."></textarea>
            </div>
            
            <div class="form-group">
                <label>Tags (separadas por v√≠rgula)</label>
                <input type="text" id="courseTags" class="form-control" 
                       placeholder="Ex: Sa√∫de, Presencial, Integral, Tecnologia">
            </div>
            
            <div class="form-group">
                <label>Cor do Curso (HEX)</label>
                <div style="display: flex; gap: 12px; align-items: center;">
                    <input type="color" id="courseColor" value="#4361ee" style="width: 60px; height: 40px;">
                    <input type="text" id="courseColorHex" class="form-control" 
                           placeholder="#4361ee" value="#4361ee" style="flex: 1;">
                </div>
            </div>
            
            <div style="margin-top: 32px; display: flex; gap: 12px; justify-content: flex-end;">
                <button class="btn btn-secondary" onclick="closeCourseModal()">
                    Cancelar
                </button>
                <button class="btn btn-primary" onclick="saveCourse()">
                    <i class="fas fa-save"></i> Salvar Curso
                </button>
            </div>
        </div>
    </div>

    <script src="js/script.js"></script>
</body>
</html>
